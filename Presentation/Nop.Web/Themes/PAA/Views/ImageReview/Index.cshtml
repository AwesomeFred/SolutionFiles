@using Nop.Web.Themes.PAA.Models;
@using Nop.Web.Themes.PAA.ViewModels;

@model   IEnumerable<EntryGroup<string, UserViewModel>>

@{
    ViewBag.Title = "Review";
    ViewBag.Id = "Image-Review";
    ViewBag.PageTitle = "Review";


}

<style type="text/css">
    #artist-iden {
        background-color: #FCB349;
        line-height: 20px;
        padding: 5px;
    }

    table.entry-table {
        background-color: bisque;
        padding: 4px;
        width: 1000px;
    }


        table.entry-table tr th {
            padding: 10px;
            text-align: center;
            border-bottom: 1px solid #ccc;
            width: 100px !important;
        }

        table.entry-table tr td {
            padding: 10px;
            text-align: center;
        }
</style>




<table class="table">



    @foreach (var group in Model)
    {
        <tr><td id="artist-iden"> <strong> Entrant: </strong>  @group.Key </td>  </tr>
        <tr>
            <td>
                <table cellpadding="6px" class="entry-table">
                    <thead>
                        <tr>
                            <th>Click Email</th>

                            <th>Art Title</th>
                            <th>Artist</th>
                            @*<th>Country</th>*@
                            <th>Time Entered</th>
                            <th>Size</th>
                            <th>Medium</th>
                            <th>Price</th>
                            <th>Image</th>
                        </tr>
                    </thead>

                    @foreach (var entry in group.Values)
                    {
                        string fileName = Path.GetFileName(entry.Path);

                        string base64 = String.Empty, imgSrc = string.Empty;



                        if (entry.ImageBytesArray != null)
                        {
                            base64 = Convert.ToBase64String(entry.ImageBytesArray);
                            imgSrc = String.Format("data:image/jpg;base64,{0}", base64);
                        }



                        <tbody>
                            <tr>
                                <td> <a href="mailto: @entry.Email ">    @entry.Email </a> </td>

                                <td> @entry.ArtTitle </td>
                                <td> @entry.ArtistName </td>
                                @*<td> @entry.CountryofOrigin </td>*@
                                <td> @entry.Entered </td>
                                <td> @entry.Dimensions </td>
                                <td> @entry.Medium </td>
                                <td> @entry.Price </td>
                                <td>

                                    @if ( entry.ImageBytesArray != null )
                                    {
                                    <img src="@imgSrc" height="120" title="@fileName" />
                                    }
                                    else
                                    {

                                    <p style="color: red; font-size: 2rem; border: 1px solid red;">Corrupted <br> Image! </p>

                                    }

                                </td>
                            </tr>
                        </tbody>
                    }
                </table>

            </td>
        </tr>
    }
</table>

